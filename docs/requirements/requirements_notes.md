# 要件定義メモ

## プロジェクト概要
- Repo: novelit（小説執筆アプリ）
- 目的: スマホで「Gitっぽい試行錯誤」を可能にする（確定保存＝スナップショット、履歴、復元。ブランチ/マージは後）
- ターゲット: iOS（SwiftUI + SwiftData + Swift Testing）
- MVP: 作品一覧 → 本文編集 → 永続化 → 確定保存（スナップショット作成） → 履歴一覧 → プレビュー → 復元
- 非ゴール（現段階）: クラウド同期、差分/3-way merge、全文検索、リッチテキスト

## ユーザー/価値仮説（現状）
- 対象: 小説作家全般に刺さる体験を目指す
- 価値: 失敗を恐れず書ける（スナップショット/履歴/復元）
- モバイル: アイデアが浮かんだ瞬間に即記録できる体験
- 同期: PC/スマホ間での同期を重視（将来は各プラットフォームでネイティブ実装）
- 執筆スタイル（自己申告）: 大枠プロットと登場人物設定を先に書く（Plotter/Plantser寄り）

## 編集体験/情報構造の方向性（暫定）
- UIはエディタ型（左に行番号、右に本文）。
- 作品は「ファイル/フォルダ構造」で管理する前提。
- アウトライン/プロットは独立ファイルで管理。
- キャラ設定とリサーチは専用フォルダを作り、項目ごとにファイル分割。
- Git的な履歴/差分の相性を考え、論理行の行番号を重視。
- 1行=1段落運用など、差分が安定する書き方を推奨候補にする。
- 作品作成時に「テンプレートから始める/空で始める」を選べる導線を検討。
- テンプレート名は「標準」「ミニマル」。
- ミニマルは初期ファイルを生成しない。
- 標準は本文/アウトライン/プロット/キャラクター/情報の初期ファイル・フォルダを自動生成。
- UI上は拡張子を非表示にして、本文/アウトライン等の名前だけを表示する（初心者配慮）。
- フォルダは右側に「>」等のマークを表示して判別する。
- 標準テンプレートの初期内容は見出しのみ（本文は空）。

例: 作品ディレクトリ構成（案）
- 本文（本文ファイル）
- アウトライン（アウトラインファイル）
- プロット（プロットファイル）
- `キャラクター/`（キャラ設定）
  - `alice`
  - `bob`
- `情報/`（リサーチ）
  - `history`
  - `locations`

例: テンプレート初期内容（標準案）
- 本文
  - 見出し: 作品タイトル / 章・シーン見出し / メモ
- アウトライン
  - 見出し: 全体要約 / 章構成 / シーン一覧 / 伏線
- プロット
  - 見出し: 起承転結 or 三幕 / ビート表 / 主要転換点
- キャラクター/
  - 見出し: 基本情報 / 目的・葛藤 / 変化の弧 / 関係性
- 情報/
  - 見出し: テーマ / 要点 / 出典・リンク / 未解決事項

### 行番号/改行運用の注意点（暫定）
- 行番号は論理行（改行単位）に固定し、画面の折り返しは数えない。
- 表示幅に合わせた手動折り返しは差分ノイズになるため避ける（ソフトラップ前提）。
- 1行が長いと差分が粗くなるため、段落/シーン/ビート単位で適度に改行する。
- Markdownプレビューを使う場合、改行と段落の扱いが変わるため表記ルールを決める。
- 行番号は挿入でずれるため、参照は「行番号＋スナップショット時点」を前提にする。
- 推奨案: 1段落=1行、段落間は空行。

## 執筆プロセス調査メモ（Web検索）

### 1) 執筆プロセスは「固定の手順」ではなく「活動の集合」
- Writing process は「文章を生み出すための精神的・身体的ステップの集合」と定義される。
- 使う道具（キーボード、タッチスクリーン等）の特性が書き方に影響する。
- 執筆は個人差が大きく、書く前後の活動（話す・描く・読む・調べる等）も含む。

### 2) 代表的な4タスク（Prewriting / Drafting / Revising / Editing）と反復性
- Prewriting: 書く前の準備（アウトライン、プロット、キャラ設定、リサーチなど）。
- Drafting: 実際に本文を書く作業。
- Revising: 既に書いた部分を作り直す（構成/内容の再設計）。
- Editing: 表現や表記の磨き込み（スタイル/誤字/整合性など）。
- 実際は順番通りに進むのではなく、行き来する反復的プロセスである。

### 3) 執筆スタイルの3分類（Plotter / Pantser / Plantser）
- Plotter: 詳細な計画・アウトラインを先に作る書き方。
- Pantser: 計画せずに書きながら探索する書き方。
- Plantser: 両者の折衷（大枠だけ決めて書き進める）。
- 自分に合う進め方を見極めることが重要とされる。

### 4) アウトラインの意味
- アウトラインは階層構造で主要点を整理するリスト。
- 草稿作成や要約の道具として使われる。
- 粒度の例: 企画 → 章 → シーン → ビート（出来事）。
- 目的の例: 構成の抜け漏れ確認、伏線管理、視点/時系列の整理、分量配分。
- 形式の例: 箇条書き、カード並べ、タイムライン。
- 例:
  - 章1: 主人公が発端に遭遇
    - シーン1: 事件の発見
    - シーン2: 相棒との出会い
  - 章2: 対立の拡大

### 5) リサーチとは（小説執筆での意味）
- 物語の説得力と正確さを高めるための情報収集。
- 対象の例: 時代背景、職業/専門知識、地理・地名、文化・慣習、技術・道具、言葉遣い。
- 目的の例: 誤情報の回避、臨場感の向上、設定の一貫性維持。
- 収集方法の例: 書籍、論文/記事、現地取材、専門家へのヒアリング、一次資料。
- まとめ方の例: 出典リンク付きメモ、用語集、参考画像/地図、時系列ノート。

### 6) プロダクトへの示唆（要件に効くポイント）
- 非線形な執筆に対し、履歴・スナップショット・復元は相性が良い。
- Plotter/Pantser/Plantserの三者を同時に満たすUIが必要（アウトライン派と自由入力派の両方をカバー）。
- モバイルの入力特性（短時間・断続的）に合わせた「即メモ → 後で整理」導線が有効。
- デバイス/入力の違いが書き方に影響するため、同期・ネイティブ体験は重要な価値軸になり得る。

参照:
- https://en.wikipedia.org/wiki/Writing_process
- https://human.libretexts.org/Courses/Harrisburg_Area_Community_College/Introduction_to_Novel_Writing_(Girardi)/01:_Chapters/1.02:_Pantser_Plotter_Plantser_-_What_is_your_writing_style
- https://en.wikipedia.org/wiki/Outline_(list)

## 要件定義の次のステップ（提案）
- 企画1ページ化: 課題/目的/価値/対象/非ゴールを明文化
- MVPユーザーフロー: 既存の6ステップを確定し、画面単位に分割
- 機能要件: 画面×操作の一覧化（例: 作品作成、本文編集、スナップショット作成/復元）
- 非機能要件: 同期方式、オフライン、性能、データ保護方針
- 受け入れ条件: Swift Testingを前提にした完了定義

## 未確定事項（要確認）
- クラウド同期はMVPに含めるか（当初は非ゴールだが同期重視の要望あり）
- 対象プラットフォームの範囲（iOSのみ or 将来のmacOS/Android前提）
- 同期基盤の方針（iCloud/独自/他サービス）
